<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • httptest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-104182925-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104182925-1');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">httptest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/httptest.html">Get Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/httptest.html">Overview</a>
    <a class="dropdown-item" href="../articles/redacting.html">Redacting Sensitive Information</a>
    <a class="dropdown-item" href="../articles/vignettes.html">Using with Vignettes</a>
    <a class="dropdown-item" href="../articles/faq.html">FAQ</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../news/">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nealrichardson/httptest">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://enpiar.com">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/nealrichardson/httptest/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4.2.0" id="httptest-420">httptest 4.2.0<a class="anchor" aria-label="anchor" href="#httptest-420"></a></h2><p class="text-muted">CRAN release: 2023-05-28</p>
<ul><li>
<code><a href="../reference/with_mock_dir.html">with_mock_dir()</a></code> uses the requester set by <code><a href="../reference/set_requester.html">set_requester()</a></code> (<a href="https://github.com/nealrichardson/httptest/issues/70" class="external-link">#70</a>, <a href="https://github.com/maelle" class="external-link">@maelle</a>).</li>
<li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> can be used without loading <code><a href="https://enpiar.com/r/httptest/">library(httptest)</a></code> (<a href="https://github.com/nealrichardson/httptest/issues/77" class="external-link">#77</a>, <a href="https://github.com/kforner" class="external-link">@kforner</a>).</li>
<li>
<code><a href="../reference/stop_mocking.html">stop_mocking()</a></code> correctly untraces all functions (<a href="https://github.com/nealrichardson/httptest/issues/79" class="external-link">#79</a>, <a href="https://github.com/kforner" class="external-link">@kforner</a>).</li>
<li>
<code><a href="../reference/get_current_requester.html">get_current_requester()</a></code> is now included within the package exports to match the behavior of <code><a href="../reference/get_current_redactor.html">get_current_redactor()</a></code> (<a href="https://github.com/nealrichardson/httptest/issues/81" class="external-link">#81</a>, <a href="https://github.com/stephenashton-dhsc" class="external-link">@stephenashton-dhsc</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4.1.0" id="httptest-410">httptest 4.1.0<a class="anchor" aria-label="anchor" href="#httptest-410"></a></h2><p class="text-muted">CRAN release: 2021-09-22</p>
<ul><li>Function alias <code>with_mock_API</code>, deprecated in 3.0.0, has been removed.</li>
<li>Update some tests for an upcoming release of <code>testthat</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4.0.0" id="httptest-400">httptest 4.0.0<a class="anchor" aria-label="anchor" href="#httptest-400"></a></h2><p class="text-muted">CRAN release: 2021-02-01</p>
<div class="section level3">
<h3 id="changes-for-compatibility-with-testthatrd-edition-4-0-0">Changes for compatibility with testthat 3rd edition<a class="anchor" aria-label="anchor" href="#changes-for-compatibility-with-testthatrd-edition-4-0-0"></a></h3>
<ul><li>
<code><a href="../reference/expect_header.html">expect_header()</a></code> now emits a single warning with all of the headers that are included with the call (instead of one warning per header). This makes catching multiple headers easier and prevents excess warnings when using testthat 3e (<a href="https://github.com/nealrichardson/httptest/issues/38" class="external-link">#38</a>, <a href="https://github.com/jonkeane" class="external-link">@jonkeane</a>)</li>
<li>Quiet an extraneous message about untracing <code><a href="https://rdrr.io/pkg/curl/man/multipart.html" class="external-link">curl::form_file()</a></code> (<a href="https://github.com/nealrichardson/httptest/issues/35" class="external-link">#35</a>, <a href="https://github.com/dmenne" class="external-link">@dmenne</a>)</li>
<li>Numerous internal testing changes to ensure compatibility with testthat 3e</li>
</ul></div>
<div class="section level3">
<h3 id="other-fixes-and-enhancements-4-0-0">Other fixes and enhancements<a class="anchor" aria-label="anchor" href="#other-fixes-and-enhancements-4-0-0"></a></h3>
<ul><li>Add <code><a href="../reference/with_mock_dir.html">with_mock_dir()</a></code> that allows to automatically switch between recording and playing back for a test (<a href="https://github.com/nealrichardson/httptest/issues/48" class="external-link">#48</a>, <a href="https://github.com/maelle" class="external-link">@maelle</a>).</li>
<li>Mocking PUT and POST with a body consisting of only <code><a href="https://httr.r-lib.org/reference/upload_file.html" class="external-link">httr::upload_file()</a></code> no longer leaves a file connection open.</li>
<li>Mock files with special characters in the filename are now correctly found (<a href="https://github.com/nealrichardson/httptest/issues/33" class="external-link">#33</a>, <a href="https://github.com/natbprice" class="external-link">@natbprice</a>)</li>
<li>Many improvements to interactive test running and mock recording, including that <code><a href="../reference/mockPaths.html">.mockPaths()</a></code> will prefer to use <code>tests/testthat</code> if it exists (i.e. when running interactively in the package root directory) (<a href="https://github.com/nealrichardson/httptest/issues/52" class="external-link">#52</a>) and <code><a href="../reference/start_vignette.html">start_vignette()</a></code> similarly prefers the <code>vignettes</code> directory (<a href="https://github.com/nealrichardson/httptest/issues/55" class="external-link">#55</a>).</li>
<li>Function aliases <code>with_fake_HTTP</code> and <code>buildMockURL</code>, deprecated in 3.0.0, have been removed.</li>
<li>Testing: switch continuous integration to use GitHub Actions (<a href="https://github.com/nealrichardson/httptest/issues/36" class="external-link">#36</a>, <a href="https://github.com/jonkeane" class="external-link">@jonkeane</a>); rename <code>helper.R</code> to <code>setup.R</code> per <code>testthat</code>’s latest recommendations (<a href="https://github.com/nealrichardson/httptest/issues/44" class="external-link">#44</a>, <a href="https://github.com/maelle" class="external-link">@maelle</a>)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.3.0" id="httptest-330">httptest 3.3.0<a class="anchor" aria-label="anchor" href="#httptest-330"></a></h2><p class="text-muted">CRAN release: 2020-01-28</p>
<ul><li>(Re)load package redactors when loading a package interactively with <code><a href="https://pkgload.r-lib.org/reference/load_all.html" class="external-link">pkgload::load_all()</a></code>, formerly of <code>devtools</code> (<a href="https://github.com/nealrichardson/httptest/issues/15" class="external-link">#15</a>)</li>
<li>
<code><a href="../reference/expect_header.html">expect_header()</a></code> now defaults to <code>ignore.case = TRUE</code> because HTTP header names are case insensitive.</li>
<li>Support mocking of file uploads via <code><a href="https://httr.r-lib.org/reference/upload_file.html" class="external-link">httr::upload_file</a></code> on all platforms (<a href="https://github.com/nealrichardson/httptest/issues/25" class="external-link">#25</a>)</li>
<li>Remove deprecated <code>redact</code> and <code>verbose</code> arguments to <code>capture_requests</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.2" id="httptest-322">httptest 3.2.2<a class="anchor" aria-label="anchor" href="#httptest-322"></a></h2><p class="text-muted">CRAN release: 2018-12-07</p>
<ul><li>Patch for compatibility with the upcoming 1.4.0 release of <code>httr</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.2.0" id="httptest-320">httptest 3.2.0<a class="anchor" aria-label="anchor" href="#httptest-320"></a></h2><p class="text-muted">CRAN release: 2018-11-09</p>
<ul><li>
<code><a href="../reference/use_httptest.html">use_httptest()</a></code> for convenience when setting up a new package</li>
<li>Warn when capturing requests if the <code>httr</code> request function errors and no response file is written (<a href="https://github.com/nealrichardson/httptest/issues/16" class="external-link">#16</a>)</li>
<li>Support recording with <code><a href="../reference/capture_requests.html">capture_requests()</a></code> when directly calling <code>GET</code> et al. interactively with the <code>httr</code> package attached (<a href="https://github.com/nealrichardson/httptest/issues/17" class="external-link">#17</a>)</li>
<li>Support regular expression matching of URLs and request bodies in <code><a href="../reference/expect_verb.html">expect_GET()</a></code> et al. (<a href="https://github.com/nealrichardson/httptest/issues/19" class="external-link">#19</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.1.0" id="httptest-310">httptest 3.1.0<a class="anchor" aria-label="anchor" href="#httptest-310"></a></h2><p class="text-muted">CRAN release: 2018-06-19</p>
<div class="section level3">
<h3 id="better-more-efficient-response-recording-3-1-0">Better, more efficient response recording<a class="anchor" aria-label="anchor" href="#better-more-efficient-response-recording-3-1-0"></a></h3>
<ul><li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> no longer includes the “request” object inside the recorded response when writing <code>.R</code> verbose responses. As of 3.0.0, <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> inserts the current request when loading mock files, so it was being overwritten anyway. This eliminates some (though not all) of the need for redacting responses. As a result, the redacting functions <code>redact_oauth()</code> and <code>redact_http_auth()</code> have been removed because they only acted on the <code>response$request</code>, which is now dropped entirely.</li>
<li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> will record simplified response bodies for a range of Content-Types when <code>simplify = TRUE</code> (the default). Previously, only <code>.json</code> (<code>Content-Type: application/json</code>) was recorded as a simple text files; now, <code>.html</code>, <code>.xml</code>, <code>.txt</code>, <code>.csv</code>, and <code>.tsv</code> are supported.</li>
<li>When recording with <code>simplify = TRUE</code>, HTTP responses with <code>204 No Content</code> status are now written as empty files with <code>.204</code> extension. This saves around 2K of disk space per file.</li>
<li>
<code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> now can also load these newly supported file types.</li>
<li>Bare JSON files written by <code><a href="../reference/capture_requests.html">capture_requests()</a></code> are now “prettified” (i.e. multiline, nice indentation).</li>
<li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> now records responses from <code><a href="https://httr.r-lib.org/reference/RETRY.html" class="external-link">httr::RETRY()</a></code> (<a href="https://github.com/nealrichardson/httptest/issues/13" class="external-link">#13</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="vignette-setup-and-teardown-3-1-0">Vignette setup and teardown<a class="anchor" aria-label="anchor" href="#vignette-setup-and-teardown-3-1-0"></a></h3>
<ul><li>Store package-level vignette setup and teardown code, called inside <code><a href="../reference/start_vignette.html">start_vignette()</a></code> and <code><a href="../reference/start_vignette.html">end_vignette()</a></code>, in <code>inst/httptest/start-vignette.R</code> and <code>inst/httptest/end-vignette.R</code>, respectively. Like with the package redactors and request preprocessors, these are automatically executed whenever your package is loaded and <code>start/end_vignette</code> is called. This makes it easy to write multiple vignettes without having to copy and paste as much setup code. See <code><a href="../articles/vignettes.html">vignette("vignettes")</a></code> for details.</li>
</ul></div>
<div class="section level3">
<h3 id="other-enhancements-and-options-3-1-0">Other enhancements and options<a class="anchor" aria-label="anchor" href="#other-enhancements-and-options-3-1-0"></a></h3>
<ul><li>
<code><a href="../reference/gsub_response.html">gsub_response()</a></code> now applies over the URL in a <code>Location</code> header, if found.</li>
<li>Add <code>options(httptest.max.print)</code> to allow you the ability to specify a length to which to truncate the request body printed in the error message for requests in <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code>. Useful for debugging mock files not found when there are large request bodies.</li>
<li>Add <code>options(httptest.debug)</code>, which if <code>TRUE</code> prints more details about which functions are being traced (by <code><a href="https://rdrr.io/r/base/trace.html" class="external-link">base::trace()</a></code>) and when they’re called.</li>
<li>Deprecate the “verbose” argument to <code><a href="../reference/capture_requests.html">capture_requests()</a></code>: use <code>options(httptest.verbose)</code> instead.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.0" id="httptest-300">httptest 3.0.0<a class="anchor" aria-label="anchor" href="#httptest-300"></a></h2><p class="text-muted">CRAN release: 2018-01-16</p>
<div class="section level3">
<h3 id="major-features-3-0-0">Major features<a class="anchor" aria-label="anchor" href="#major-features-3-0-0"></a></h3>
<ul><li>Write vignettes and other R Markdown documents that communicate with a remote API using <code>httptest</code>. Add a code chunk at the beginning of the document including <code><a href="../reference/start_vignette.html">start_vignette()</a></code>. The first time you run the document, the real API responses are recorded to a subfolder in your <code>vignettes</code> directory. Subsequent vignette builds use these recorded responses, allowing the document to regenerate without a network connection or API credentials. If your document needs to handle changes of server state, as when you make an API request that creates a record on the server, add a call to <code><a href="../reference/change_state.html">change_state()</a></code>. See <code><a href="../articles/vignettes.html">vignette("vignettes")</a></code> for more discussion and links to examples.</li>
<li>Packages can now have a default redacting function, such that whenever the package is loaded, <code><a href="../reference/capture_requests.html">capture_requests()</a></code> will apply that function to any responses it records. This ensures that you never forget to sanitize your API responses if you need to use a custom function. To take advantage of this feature, put a <code>function (response) {...}</code> in a file at <code>inst/httptest/redact.R</code> in your package. See the updated <code><a href="../articles/redacting.html">vignette("redacting", package = "httptest")</a></code> for more.</li>
<li>You can also now provide a function to preprocess mock requests. This can be particularly for shortening URLs—and thus the mock file paths—because of CRAN-mandated constraints on file path lengths (“non-portable file paths”). This machinery works very similar to redacting responses when recording them, except it operates on <code>request</code> objects inside of <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code>. To use it, either pass a <code>function (request) {...}</code> to <code><a href="../reference/set_requester.html">set_requester()</a></code> in your R session, or to define one for the package, put a <code>function (request) {...}</code> in a file at <code>inst/httptest/request.R</code>. <code><a href="../reference/gsub_response.html">gsub_request()</a></code> is particularly useful here. <code><a href="../articles/redacting.html">vignette("redacting", package = "httptest")</a></code> has further details.</li>
</ul></div>
<div class="section level3">
<h3 id="other-big-changes-and-enhancements-3-0-0">Other big changes and enhancements<a class="anchor" aria-label="anchor" href="#other-big-changes-and-enhancements-3-0-0"></a></h3>
<ul><li>Standardize exported functions on <code>snake_case</code> rather than <code>camelCase</code> to better align with <code>httr</code> and <code>testthat</code> (except for <code><a href="../reference/mockPaths.html">.mockPaths()</a></code>, which follows <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">base::.libPaths()</a></code>). Exported functions that have been renamed have retained their old aliases in this release, but they are to be deprecated.</li>
<li>
<code><a href="../reference/use_mock_api.html">use_mock_api()</a></code> and <code><a href="../reference/block_requests.html">block_requests()</a></code> enable the request altering behavior of <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> and <code><a href="../reference/without_internet.html">without_internet()</a></code>, respectively, without the enclosing context. (<code>use_mock_api</code> is called inside <code><a href="../reference/start_vignette.html">start_vignette()</a></code>.) To turn off mocking, call <code><a href="../reference/stop_mocking.html">stop_mocking()</a></code>.</li>
<li>Internal change: mocking contexts no longer use <code><a href="https://testthat.r-lib.org/reference/with_mock.html" class="external-link">testthat::with_mock()</a></code> and instead use <code><a href="https://rdrr.io/r/base/trace.html" class="external-link">trace()</a></code>.</li>
<li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code>/<code><a href="../reference/capture_requests.html">start_capturing()</a></code> now allow you to call <code><a href="../reference/mockPaths.html">.mockPaths()</a></code> while actively recording so that you can record server state changes to a different mock “layer”. Previously, the recording path was fixed when the context was initialized.</li>
<li>The <code>redact</code> argument to <code><a href="../reference/capture_requests.html">capture_requests()</a></code>/<code><a href="../reference/capture_requests.html">start_capturing()</a></code> is deprecated in favor of <code><a href="../reference/set_redactor.html">set_redactor()</a></code>. This function can take a <code>function (response) {...}</code>; a formula as shorthand for an anonymous function with <code>.</code> as the “response” argument, as in the <a href="https://purrr.tidyverse.org" class="external-link"><code>purrr</code></a> package; a list of functions that will be chained together; or <code>NULL</code> to disable the default <code><a href="../reference/redact.html">redact_auth()</a></code>.</li>
<li>
<code><a href="../reference/redact.html">redact_headers()</a></code> and <code><a href="../reference/redact.html">within_body_text()</a></code> no longer return redacting functions. Instead, they take <code>response</code> as their first argument. This makes them more natural to use and chain together in custom redacting functions. To instead return a function as before, see <code><a href="../reference/as-redactor.html">as.redactor()</a></code>.</li>
<li>
<code><a href="../reference/gsub_response.html">gsub_response()</a></code> is a new redactor that does regular-expression replacement (via <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">base::gsub()</a></code>) within a response’s body text and URL.</li>
<li>
<code><a href="../reference/mockPaths.html">.mockPaths()</a></code> only keeps unique path values, consistent with <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">base::.libPaths()</a></code>.</li>
<li>Option <code>"httptest.verbose"</code> to govern some extra debug messaging (automatically turned off by <code><a href="../reference/start_vignette.html">start_vignette()</a></code>)</li>
<li>Fix a bug where <code>write_disk</code> responses that were recorded in one location and moved to another directory could not be loaded</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.4" id="httptest-234">httptest 2.3.4<a class="anchor" aria-label="anchor" href="#httptest-234"></a></h2><p class="text-muted">CRAN release: 2017-11-14</p>
<ul><li>Ensure forward compatibility with a <a href="https://github.com/wch/r-source/commit/62fced00949b9a261034d24789175b205f7fa866" class="external-link">change</a> in <code><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse()</a></code> in the development version of R (r73699).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.2" id="httptest-232">httptest 2.3.2<a class="anchor" aria-label="anchor" href="#httptest-232"></a></h2><p class="text-muted">CRAN release: 2017-10-20</p>
<ul><li>Add <code>redact_oauth()</code> to purge <code><a href="https://httr.r-lib.org/reference/Token-class.html" class="external-link">httr::Token()</a></code> objects from requests (<a href="https://github.com/nealrichardson/httptest/issues/9" class="external-link">#9</a>). <code>redact_oauth()</code> is built in to <code><a href="../reference/redact.html">redact_auth()</a></code>, the default redactor, so no action is required to start using it.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.0" id="httptest-230">httptest 2.3.0<a class="anchor" aria-label="anchor" href="#httptest-230"></a></h2>
<ul><li>Remove support for mocking <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">utils::download.file()</a></code>, as <code>testthat</code> no longer permits it. Use <code>httr::GET(url, config = write_disk(filename))</code> instead, which <code>httptest</code> now more robustly supports in <code><a href="../reference/capture_requests.html">capture_requests()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.0" id="httptest-220">httptest 2.2.0<a class="anchor" aria-label="anchor" href="#httptest-220"></a></h2>
<ul><li>Add redacting functions (<code><a href="../reference/redact.html">redact_auth()</a></code>, <code><a href="../reference/redact.html">redact_cookies()</a></code>, <code>redact_http_auth()</code>, <code><a href="../reference/redact.html">redact_headers()</a></code>, <code><a href="../reference/redact.html">within_body_text()</a></code>) that can be specified in <code><a href="../reference/capture_requests.html">capture_requests()</a></code> so that sensitive information like tokens and ids can be purged from recorded response files. The default redacting function is <code><a href="../reference/redact.html">redact_auth()</a></code>, which wraps several of them. See <code><a href="../articles/redacting.html">vignette("redacting", package = "httptest")</a></code> for more.</li>
<li>When loading a JSON mock response, the current “request” object is now included in the response returned, as is the case with real responses.</li>
<li>Remove the file size limitation for mock files loaded in <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code>
</li>
<li>
<code><a href="../reference/skip_if_disconnected.html">skip_if_disconnected()</a></code> now also wraps <code><a href="https://testthat.r-lib.org/reference/skip.html" class="external-link">testthat::skip_on_cran()</a></code> so that tests that require a real network connection don’t cause a flaky test failure on CRAN</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.2" id="httptest-212">httptest 2.1.2<a class="anchor" aria-label="anchor" href="#httptest-212"></a></h2><p class="text-muted">CRAN release: 2017-08-04</p>
<ul><li>Fix for compatibility with upcoming release of <a href="https://httr.r-lib.org/" class="external-link">httr</a> that affected non-GET requests that did not contain any request body.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.0" id="httptest-210">httptest 2.1.0<a class="anchor" aria-label="anchor" href="#httptest-210"></a></h2><p class="text-muted">CRAN release: 2017-07-31</p>
<ul><li>
<code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> and <code><a href="../reference/without_internet.html">without_internet()</a></code> handle multipart and urlencoded form data in mocked HTTP requests.</li>
<li>
<code>buildMockURL()</code> escapes URL characters that are not valid in file names on all R platforms (which <code>R CMD check</code> would warn about).</li>
<li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> now has a <code>verbose</code> argument, which, if <code>TRUE</code>, prints a message with the file path where each captured request is written.</li>
<li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> takes the first element in <code><a href="../reference/mockPaths.html">.mockPaths()</a></code> as its default “path” argument. The default is unchanged since <code><a href="../reference/mockPaths.html">.mockPaths()</a></code> by default returns the current working directory, just as the “path” default was, but if you set a different mock path for reading mocks, <code><a href="../reference/capture_requests.html">capture_requests()</a></code> will write there as well.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="httptest-200">httptest 2.0.0<a class="anchor" aria-label="anchor" href="#httptest-200"></a></h2><p class="text-muted">CRAN release: 2017-06-05</p>
<ul><li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> now writes non-JSON-content-type and non-200-status responses as full “response” objects in .R files. <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> now looks for .R mocks if a .json mock isn’t found. This allows all requests and all responses, not just JSON content, to be mocked.</li>
<li>New <code><a href="../reference/mockPaths.html">.mockPaths()</a></code> function, in the model of <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>, which allows you to specify alternate directories in which to search for mock API responses.</li>
<li>Documentation enriched and <code><a href="../articles/httptest.html">vignette("httptest")</a></code> added.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.0" id="httptest-130">httptest 1.3.0<a class="anchor" aria-label="anchor" href="#httptest-130"></a></h2><p class="text-muted">CRAN release: 2017-04-13</p>
<ul><li>New context <code><a href="../reference/capture_requests.html">capture_requests()</a></code> to collect the responses from real requests and store them as mock files</li>
<li>
<code><a href="../reference/with_trace.html">with_trace()</a></code> convenience wrapper around <code>trace</code>/<code>untrace</code>
</li>
<li>
<code>mockDownload()</code> now processes request URLs as <code>mock_request()</code> does</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.0" id="httptest-120">httptest 1.2.0<a class="anchor" aria-label="anchor" href="#httptest-120"></a></h2><p class="text-muted">CRAN release: 2017-03-22</p>
<ul><li>Add support in <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> for loading request fixtures for all HTTP verbs, not only GET (<a href="https://github.com/nealrichardson/httptest/pull/4" class="external-link">#4</a>). Include request body in the mock file path hashing.</li>
<li>
<code>buildMockURL()</code> can accept either a ‘request’ object or a character URL</li>
<li>Bump mock payload max size up to 128K</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.2" id="httptest-112">httptest 1.1.2<a class="anchor" aria-label="anchor" href="#httptest-112"></a></h2>
<ul><li>Support full URLs, not just file paths, in <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> (<a href="https://github.com/nealrichardson/httptest/issues/1" class="external-link">#1</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="httptest-110">httptest 1.1.0<a class="anchor" aria-label="anchor" href="#httptest-110"></a></h2><p class="text-muted">CRAN release: 2017-02-03</p>
<ul><li>
<code><a href="../reference/expect_header.html">expect_header()</a></code> to assert that a HTTP request has a header</li>
<li>Always prune the leading “:///” that appears in <code><a href="../reference/with_mock_api.html">with_mock_api()</a></code> if the URL has a querystring</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="httptest-100">httptest 1.0.0<a class="anchor" aria-label="anchor" href="#httptest-100"></a></h2><p class="text-muted">CRAN release: 2016-12-31</p>
<ul><li>Initial addition of functions and tests, largely pulled from <a href="https://enpiar.com/r/httpcache/" class="external-link">httpcache</a> and <a href="https://crunch.io/r/crunch/" class="external-link">crunch</a>.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Neal Richardson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

