<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="httptest provides a framework for sanitizing mocks recorded from real requests so that your tests don't reveal private tokens. By default, it redacts standard auth credentials, and it is extensible so that you can modify the responses however you want.">
<title>Redacting and Modifying Recorded Requests • httptest</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Redacting and Modifying Recorded Requests">
<meta property="og:description" content="httptest provides a framework for sanitizing mocks recorded from real requests so that your tests don't reveal private tokens. By default, it redacts standard auth credentials, and it is extensible so that you can modify the responses however you want.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-104182925-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104182925-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">httptest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/httptest.html">Get Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/httptest.html">Overview</a>
    <a class="dropdown-item" href="../articles/redacting.html">Redacting Sensitive Information</a>
    <a class="dropdown-item" href="../articles/vignettes.html">Using with Vignettes</a>
    <a class="dropdown-item" href="../articles/faq.html">FAQ</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nealrichardson/httptest">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://enpiar.com">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Redacting and Modifying Recorded Requests</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nealrichardson/httptest/blob/HEAD/vignettes/redacting.Rmd" class="external-link"><code>vignettes/redacting.Rmd</code></a></small>
      <div class="d-none name"><code>redacting.Rmd</code></div>
    </div>

    
    
<p><code>httptest</code> makes it easy for you to write tests that don’t
require a network connection. With <code><a href="../reference/capture_requests.html">capture_requests()</a></code>, you
can record responses from real requests so that you can use them later
in tests. A further benefit of testing with mocks is that you don’t have
to deal with authentication and authorization on the server in your
tests—you don’t need to supply real login credentials for your test
suite to run. You can have full test coverage of your code, both on
public continuous-integration services like Travis-CI and when you
submit packages to CRAN, all without having to publish secret tokens or
passwords.</p>
<p>It is important to ensure that the mocks you include in your test
suite do not inadvertently reveal private information as well. For many
requests and responses, the default behavior of
<code>capture_requests</code> is to write out only the response body,
which makes for clean, easy-to-read test fixtures. For other responses,
however—those returning non-JSON content or an error status—it writes a
<code>.R</code> file containing a <code>httr</code> “response” object.
This response contains all of the headers and cookies that the server
returns, and if not addressed, it could publicly expose your personal
credentials.</p>
<p><code>httptest</code> provides a framework for sanitizing the
responses that <code>capture_requests</code> records. By default, it
redacts the standard ways that auth credentials are passed in responses.
The framework is extensible and allows you to specify custom redaction
policies that match how your API accepts and returns sensitive
information. Common redacting functions are configurable and natural to
adapt to your needs, while the workflow also supports custom redacting
functions that can alter the recorded requests however you want,
including altering the response content and URL.</p>
<div class="section level2">
<h2 id="default-redact-standard-auth-methods">Default: redact standard auth methods<a class="anchor" aria-label="anchor" href="#default-redact-standard-auth-methods"></a>
</h2>
<p>By default, the <code>capture_requests</code> context evaluates the
<code><a href="../reference/redact.html">redact_auth()</a></code> function on a response object before writing
it to disk. <code>redact_auth</code> wraps more specific redacting
functions that do things like sanitize any cookies in the server
response. Note that request parameters that communicate your credentials
to the API, including cookies, authorization headers, basic HTTP auth,
and OAuth, are also purged from the recorded response file:
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> only records the response, not the
request, even though an <code>httr</code> response object generally
includes the request object.</p>
<p>What does “redacting” entail? We aren’t the CIA working with
classified reports, taking a heavy black marker over certain details. In
our case, redacting means replacing the sensitive content with the
string “REDACTED”. Your recorded responses will be as “real” as
possible: if, for example, you have an “Authorization” header in your
request, the header will remain in your test fixture, but real token
value will be replaced with “REDACTED”. And only the recorded responses
will be affected—the actual response you’re capturing in your active R
session is not modified, only the mock that is written out.</p>
<p>To illustrate, here’s a request that has a cookie in the response.
Let’s record it.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/capture_requests.html">capture_requests</a></span><span class="op">(</span>simplify <span class="op">=</span> <span class="cn">FALSE</span>, <span class="op">{</span></span>
<span>  <span class="va">real_resp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span><span class="op">(</span><span class="st">"http://httpbin.org/cookies/set?token=12345"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>In the actual response object in our R session, the cookie is
there:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">real_resp</span><span class="op">$</span><span class="va">cookies</span></span>
<span></span>
<span><span class="co">##        domain  flag path secure expiration  name value</span></span>
<span><span class="co">## 1 httpbin.org FALSE    /  FALSE       &lt;NA&gt; token 12345</span></span></code></pre></div>
<p>But when we load that recorded response in tests later, the cookie
won’t appear because it was redacted:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mockfile</span> <span class="op">&lt;-</span> <span class="st">"httpbin.org/cookies/set-5b2631.R"</span></span>
<span><span class="va">mock</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="va">mockfile</span><span class="op">)</span><span class="op">$</span><span class="va">value</span></span>
<span><span class="va">mock</span><span class="op">$</span><span class="va">cookies</span></span>
<span></span>
<span><span class="co">##        domain  flag path secure expiration  name    value</span></span>
<span><span class="co">## 1 httpbin.org FALSE    /  FALSE       &lt;NA&gt; token REDACTED</span></span>
<span></span>
<span><span class="va">mock</span><span class="op">$</span><span class="va">all_headers</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"set-cookie"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co">## [1] "REDACTED"</span></span></code></pre></div>
<blockquote>
<p>Side note: the example uses the <code>simplify=FALSE</code> option to
<code>capture_requests</code> for illustration purposes. With the
default <code>simplify=TRUE</code>, only the response body would be
written to a mock file because this particular GET request returns JSON
content. Thus, there would be no cookie present anyway.
<code>simplify=FALSE</code> forces <code>capture_requests</code> to
write the verbose .R response object file for every request, not just
those that don’t return JSON content.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="writing-custom-redacting-functions">Writing custom redacting functions<a class="anchor" aria-label="anchor" href="#writing-custom-redacting-functions"></a>
</h2>
<p>Sensitive or personal information is not limited to response cookies
or headers. Sometimes identifiers are built into URLs or response
bodies. These may be less sensitive than auth tokens, but you may want
to conceal or anonymize your data that is included in test fixtures.</p>
<p>Redacting functions can help with this content as well. You can use
redactors on any part of the response object, not just the headers and
cookies. A redactor is just a function that takes a response as input
and returns a response object, so anything is possible if you write a
custom redactor.</p>
<p>For example, in the <a href="https://www.pivotaltracker.com/help/api" class="external-link">API for Pivotal
Tracker</a>, the agile project management tool, the Pivotal project id
is built into many of its URLs. As a result, it would appear in mock
file paths you record. The id is also often included in the response
body.</p>
<p>We’d rather not have that information leak in our test fixtures, so
in the <a href="https://enpiar.com/r/pivotaltrackR/" class="external-link">pivotaltrackR</a>
package, which wraps this API, we need to tell
<code>capture_requests</code> to scrub this id when we record mocks.</p>
<p>To do this, we’ll use <code><a href="../reference/set_redactor.html">set_redactor()</a></code> to supply a custom
function. The project id is stored in the R session in
<code>options(pivotal.project)</code>, so we can identify it and
find-and-replace it with <code><a href="../reference/gsub_response.html">gsub_response()</a></code>. The function
takes <code>response</code> as its first argument and then passes the
rest to <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub()</a></code>, which is called on both the response URL
and the response body.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_redactor.html">set_redactor</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="../reference/gsub_response.html">gsub_response</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"pivotal.project"</span><span class="op">)</span>, <span class="st">"123"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note the formula shorthand: this follows the syntax in the <a href="https://purrr.tidyverse.org" class="external-link"><code>purrr</code></a> package for
defining anonymous functions. It is equivalent to
<code>function(response) gsub_response(response, getOption("pivotal.project"), "123")</code>.</p>
<p>Valid inputs to <code><a href="../reference/set_redactor.html">set_redactor()</a></code> include:</p>
<ul>
<li>A function taking a single argument, the <code>response</code>, and
returning a valid <code>response</code> object</li>
<li>A formula as shorthand for an anonymous function with <code>.</code>
as the “response” argument</li>
<li>A list of redacting functions/formulas, which will be executed in
sequence on the response</li>
<li>
<code>NULL</code>, to override the default
<code><a href="../reference/redact.html">redact_auth()</a></code> and do no redacting</li>
</ul>
<p>To see this in action, let’s record a request:</p>
<!-- show the output -->
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_redactor.html">set_redactor</a></span><span class="op">(</span><span class="va">redact_pivotal</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/capture_requests.html">start_capturing</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu">getStories</span><span class="op">(</span>search <span class="op">=</span> <span class="st">"mnt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/capture_requests.html">stop_capturing</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Note that the actual project id appears in the data returned from the
search.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">project_id</span></span>
<span><span class="co">## [1] "my-project-name"</span></span></code></pre></div>
<p>However, the project id won’t be found in the recorded file. If we
load the recorded response in <code>with_mock_api</code>, we’ll see the
value we substituted in:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/with_mock_api.html">with_mock_api</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">s</span> <span class="op">&lt;-</span> <span class="fu">getStories</span><span class="op">(</span>search <span class="op">=</span> <span class="st">"mnt"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">project_id</span></span>
<span><span class="co">## [1] "123"</span></span></code></pre></div>
<p>Nor will the project id appear in the file path: since the redactor
is evaluated before determining the file path to write to, if you alter
the response URL, the destination file path will be generated based on
the modified URL. In this case, our mock is written to
“…/projects/123/stories-fb1776.json”, not
“…/projects/my-project-name/stories-fb1776.json”.</p>
<p>We can do more response cleaning with custom functions. All of the
redactors in <code>httptest</code> take the “response” object as their
first argument and return the response object modified in some way. This
lends them to pipelining, as with the <a href="https://magrittr.tidyverse.org/" class="external-link"><code>magrittr</code></a>
package.</p>
<p>Continuing with the <code>pivotaltrackR</code> example, let’s also
prune the domain and API root path from the URLs we’re recording so that
we’re making shorter file paths:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">function</span><span class="op">(</span><span class="va">response</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">response</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co"># Shorten the URL</span></span>
<span>    <span class="fu"><a href="../reference/gsub_response.html">gsub_response</a></span><span class="op">(</span><span class="st">"https://www.pivotaltracker.com/services/v5/"</span>, <span class="st">""</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co"># Remove my project ID</span></span>
<span>    <span class="fu"><a href="../reference/gsub_response.html">gsub_response</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"pivotal.project"</span><span class="op">)</span>, <span class="st">"123"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setting-a-package-level-redactor">Setting a package-level redactor<a class="anchor" aria-label="anchor" href="#setting-a-package-level-redactor"></a>
</h2>
<p>If you’re writing a package that wraps an API and you need a custom
redactor to safely record API responses, you’ll want to make sure that
you <em>always</em> record with that redactor. You don’t want to forget
to call <code><a href="../reference/set_redactor.html">set_redactor()</a></code> in your R session and end up
recording fixtures that contain your auth secrets.</p>
<p>To make sure that your redactor is “always on” for your package,
<code>httptest</code> enables you to define a package-level redactor. To
do this, put a redacting function in <code>inst/httptest/redact.R</code>
in your package. (In fact, the function in the above example is in <a href="https://github.com/nealrichardson/pivotaltrackR/blob/master/inst/httptest/redact.R" class="external-link"><code>inst/httptest/redact.R</code>
in the <code>pivotaltrackR</code> package</a>.)</p>
<p>Any time you record requests while your package is loaded, as when
running tests or building vignettes, this function will be called on the
<code>response</code> object before writing it to disk. It’s automatic:
set it there once and you never have to remember.</p>
</div>
<div class="section level2">
<h2 id="request-preprocessing">Request preprocessing<a class="anchor" aria-label="anchor" href="#request-preprocessing"></a>
</h2>
<p>Finally, depending on how long the URLs are in the API requests you
make, you may need to programmatically shorten them if you’re planning
on submitting your package to CRAN because CRAN requires file names to
be 100 characters or less. Long file names throw a “non-portable file
paths” message in <code>R CMD check</code>.</p>
<p>A good way to solve this problem is to use a request preprocessor: a
function that alters the content of your ‘httr’ <code>request</code>
before mapping it to a mock file. It’s like a redactor but for the
request object. Just as you can provide a custom function to modify
responses that are recorded, you can provide a function to tweak the
request being made in order to map the request to the right file in the
mocked context. Importantly, this lets you truncate the URLs, which then
map to files.</p>
<p>For example, if all of your API endpoints sit beneath
<code>https://language.googleapis.com/v1/</code>, you could set a
request preprocessor like:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_requester.html">set_requester</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="../reference/gsub_response.html">gsub_request</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"https\\://language.googleapis.com/v1/"</span>, <span class="st">"api/"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>and then all mocked requests would look for a path starting with
“api/” rather than “language.googleapis.com/v1/”, saving you (in this
case) 23 characters.</p>
<p>You can also provide this function in
<code>inst/httptest/request.R</code>, just as you can for the redactor,
and any time your package is loaded and you’re reading mock (previously
recorded) responses, this function will be called on the
<code>request</code> object before mapping it to a file. For example, <a href="https://github.com/nealrichardson/pivotaltrackR/blob/master/inst/httptest/request.R" class="external-link">here</a>
is the one from <code>pivotaltrackR</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">function</span><span class="op">(</span><span class="va">request</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">request</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/gsub_response.html">gsub_request</a></span><span class="op">(</span><span class="st">"https://www.pivotaltracker.com/services/v5/"</span>, <span class="st">""</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/gsub_response.html">gsub_request</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"pivotal.project"</span><span class="op">)</span>, <span class="st">"123"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Neal Richardson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
